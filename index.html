<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>电视台标 Logo 展示</title>
  <style>
    * {
      box-sizing: border-box;
    }
    :root {
      --bg-page: #f5f5f5;
      --bg-container: #fff;
      --shadow: 0 2px 12px rgba(0,0,0,0.08);
      --text-title: #333;
      --text-label: #555;
      --text-body: #333;
      --text-muted: #999;
      --text-count: #666;
      --border-input: #ddd;
      --focus-ring: rgba(24, 144, 255, 0.15);
      --bg-table: #fafbfc;
      --bg-th: #fafafa;
      --border-row: #eee;
      --hover-row: #fafafa;
      --bg-logo: #f5f5f5;
    }
    body.dark {
      --bg-page: #1a1a1a;
      --bg-container: #2d2d2d;
      --shadow: 0 2px 12px rgba(0,0,0,0.3);
      --text-title: #e8e8e8;
      --text-label: #b0b0b0;
      --text-body: #e0e0e0;
      --text-muted: #888;
      --text-count: #aaa;
      --border-input: #444;
      --focus-ring: rgba(24, 144, 255, 0.25);
      --bg-table: #252525;
      --bg-th: #333;
      --border-row: #404040;
      --hover-row: #363636;
      --bg-logo: #383838;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      margin: 0;
      padding: 24px;
      background: var(--bg-page);
      color: var(--text-body);
    }
    .container {
      max-width: 900px;
      margin: 0 auto;
      background: var(--bg-container);
      border-radius: 12px;
      box-shadow: var(--shadow);
      padding: 24px;
    }
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 12px;
      margin-bottom: 20px;
    }
    h1 {
      margin: 0;
      font-size: 1.5rem;
      color: var(--text-title);
    }
    .theme-switch {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
      color: var(--text-label);
      user-select: none;
    }
    .theme-switch input {
      position: absolute;
      width: 1px;
      height: 1px;
      opacity: 0;
    }
    .theme-switch .slider {
      position: relative;
      width: 44px;
      height: 24px;
      background: var(--border-input);
      border-radius: 24px;
      cursor: pointer;
      transition: background 0.2s;
    }
    .theme-switch .slider::after {
      content: '';
      position: absolute;
      top: 2px;
      left: 2px;
      width: 20px;
      height: 20px;
      background: #fff;
      border-radius: 50%;
      box-shadow: 0 1px 3px rgba(0,0,0,0.2);
      transition: transform 0.2s;
    }
    .theme-switch input:checked + .slider {
      background: #1890ff;
    }
    .theme-switch input:checked + .slider::after {
      transform: translateX(20px);
    }
    body.dark .theme-switch .slider {
      background: #444;
    }
    body.dark .theme-switch input:checked + .slider {
      background: #1890ff;
    }
    .search-wrap {
      margin-bottom: 20px;
    }
    .search-wrap label {
      display: block;
      margin-bottom: 6px;
      font-size: 14px;
      color: var(--text-label);
    }
    .search-input {
      width: 100%;
      max-width: 320px;
      padding: 10px 14px;
      font-size: 14px;
      border: 1px solid var(--border-input);
      border-radius: 8px;
      outline: none;
      background: var(--bg-container);
      color: var(--text-body);
    }
    .search-input:focus {
      border-color: #1890ff;
      box-shadow: 0 0 0 2px var(--focus-ring);
    }
    .search-input::placeholder {
      color: var(--text-muted);
    }
    table {
      width: 100%;
      border-collapse: collapse;
      background: var(--bg-table);
    }
    th, td {
      padding: 12px 16px;
      text-align: left;
      border-bottom: 1px solid var(--border-row);
    }
    th {
      background: var(--bg-th);
      font-weight: 600;
      color: var(--text-title);
      font-size: 14px;
    }
    td {
      font-size: 14px;
      color: var(--text-body);
    }
    tr:hover td {
      background: var(--hover-row);
    }
    .logo-cell {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .logo-img {
      width: 64px;
      height: 64px;
      object-fit: contain;
      background: var(--bg-logo);
      border-radius: 6px;
    }
    .no-result {
      text-align: center;
      padding: 40px 20px;
      color: var(--text-muted);
      font-size: 14px;
    }
    .count {
      margin-top: 12px;
      font-size: 13px;
      color: var(--text-count);
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>电视台标 Logo 展示</h1>
      <label class="theme-switch">
        <input type="checkbox" id="theme-switch" aria-label="切换深色主题" />
        <span class="slider"></span>
        <span>深色主题</span>
      </label>
    </div>
    <div class="search-wrap">
      <label for="search">按名称搜索</label>
      <input type="text" id="search" class="search-input" placeholder="输入 Logo 名称进行搜索..." autocomplete="off" />
    </div>
    <div id="table-wrap">
      <table>
        <thead>
          <tr>
            <th>频道名</th>
            <th>频道 Logo</th>
          </tr>
        </thead>
        <tbody id="tbody">
          <!-- 由 JS 填充 -->
        </tbody>
      </table>
    </div>
    <div id="no-result" class="no-result" style="display: none;">未找到匹配的 Logo</div>
    <div id="count" class="count"></div>
  </div>

  <script>
    (function () {
      var THEME_KEY = 'logo-page-dark-theme';
      var switchEl = document.getElementById('theme-switch');
      if (switchEl) {
        var isDark = localStorage.getItem(THEME_KEY) === '1';
        switchEl.checked = isDark;
        if (isDark) document.body.classList.add('dark');
        switchEl.addEventListener('change', function () {
          var dark = this.checked;
          document.body.classList.toggle('dark', dark);
          localStorage.setItem(THEME_KEY, dark ? '1' : '0');
        });
      }

      var logos = [];

      var tbody = document.getElementById('tbody');
      var noResult = document.getElementById('no-result');
      var tableWrap = document.getElementById('table-wrap');
      var countEl = document.getElementById('count');
      var searchInput = document.getElementById('search');

      function renderRows(items) {
        tbody.innerHTML = '';
        if (items.length === 0) {
          tableWrap.style.display = 'none';
          noResult.style.display = 'block';
          countEl.textContent = '';
          return;
        }
        tableWrap.style.display = 'block';
        noResult.style.display = 'none';
        countEl.textContent = '共 ' + items.length + ' 个 Logo';

        items.forEach(function (item) {
          var tr = document.createElement('tr');
          tr.innerHTML =
            '<td>' + escapeHtml(item.name) + '</td>' +
            '<td><div class="logo-cell">' +
            '<img class="logo-img" src="' + escapeHtml(item.url) + '" alt="' + escapeHtml(item.name) + '" loading="lazy" />' +
            '</div></td>';
          tbody.appendChild(tr);
        });
      }

      function escapeHtml(s) {
        var div = document.createElement('div');
        div.textContent = s;
        return div.innerHTML;
      }

      function filterLogos(keyword) {
        var k = (keyword || '').trim().toLowerCase();
        if (!k) return logos.slice();
        return logos.filter(function (item) {
          return item.name.toLowerCase().indexOf(k) !== -1;
        });
      }

      function onSearch() {
        var keyword = searchInput.value;
        var filtered = filterLogos(keyword);
        renderRows(filtered);
      }

      searchInput.addEventListener('input', onSearch);
      searchInput.addEventListener('keyup', onSearch);

      // 从 logo.json 加载数据
      fetch('./logo.json')
        .then(function (res) { return res.json(); })
        .then(function (data) {
          logos = Array.isArray(data) ? data : [];
          onSearch();
        })
        .catch(function (err) {
          console.error('加载 logo.json 失败:', err);
          noResult.style.display = 'block';
          noResult.textContent = '加载 Logo 列表失败，请检查 logo.json 是否存在。';
          tableWrap.style.display = 'none';
        });
    })();
  </script>
</body>
</html>
